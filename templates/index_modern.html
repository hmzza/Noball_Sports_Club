<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The NoBall Sports Club - Islamabad's all-in-one Sports Club</title>
    <link rel="stylesheet" href="static/css/modern_styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <!-- Modern Loading Screen -->
    <div id="loading-screen" class="modern-loading">
        <div class="loading-orb">
            <div class="orb-inner">
                <div class="orb-pulse"></div>
            </div>
        </div>
        <div class="loading-brand">
            <span class="brand-text">The NoBall Sports Club</span>
            <div class="loading-dots">
                <span></span><span></span><span></span>
            </div>
        </div>
    </div>
</head>
<body>
    <!-- Animated Background -->
    <div class="bg-animation">
        <div class="floating-shape shape-1"></div>
        <div class="floating-shape shape-2"></div>
        <div class="floating-shape shape-3"></div>
        <div class="floating-shape shape-4"></div>
        <div class="floating-shape shape-5"></div>
    </div>

    <!-- Modern Header -->
    <header class="modern-header">
        <nav class="nav-glass">
            <div class="nav-brand">
                <img src="static/images/logo.png" alt="NoBall Sports Club" class="brand-logo" style="width: 30px; height: 30px; border-radius: 50%;">
            </div>
            
            <ul class="nav-links">
                <li><a href="#home" class="nav-link">Home</a></li>
                <li><a href="#gallery" class="nav-link">Gallery</a></li>
                <li><a href="#corporate" class="nav-link">Corporate</a></li>
                <li><a href="#about" class="nav-link">About</a></li>
                <li><a href="#location" class="nav-link">Location</a></li>
                <li><a href="#contact" class="nav-link">Contact</a></li>
            </ul>
            
            <button class="mobile-toggle" id="mobile-toggle" onclick="toggleMobileMenu()">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </nav>
    </header>

    <!-- Hero Section -->
    <section id="home" class="hero-modern">
        <div class="hero-container">
            <div class="hero-content">
                <h1 class="hero-title">
                    <span class="title-main">The NoBall Sports Club</span>
                    <span class="title-accent">Islamabad's First All in one Club</span>
                </h1>
                
                <p class="hero-description">
                    All-in-one Club with 10+ Sports Facilities • Open 24/7
                </p>
                
                <div class="hero-actions">
                    <a href="{{ url_for('booking') }}" class="btn-modern primary">
                        <span class="btn-text">Book Your Court</span>
                        <i class="fas fa-arrow-right"></i>
                    </a>
                    <a href="{{ url_for('booking') }}" class="btn-modern secondary">
                        <span class="btn-text">Book Your Sport</span>
                        <i class="fas fa-calendar-plus"></i>
                    </a>
                </div>
                
                <div class="hero-stats">
                    <div class="stat-item">
                        <span class="stat-number">10+</span>
                        <span class="stat-label">Sports</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">24/7</span>
                        <span class="stat-label">Available</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">Premium</span>
                        <span class="stat-label">Quality</span>
                    </div>
                </div>
            </div>
            
            <div class="hero-visual">
                <div class="visual-container">
                    <div class="animated-logo-container">
                        <img src="static/images/logo.png" alt="NoBall Sports Club" class="rotating-logo">
                        <div class="logo-glow"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- Gallery Section -->
    <section id="gallery" class="gallery-modern">
        <div class="container-modern">
            <div class="section-header">
                <span class="section-badge">Our Courts</span>
                <h2 class="section-title">Premium Sports Facilities</h2>
                <p class="section-description">
                    Take a closer look at our world-class courts and facilities
                </p>
            </div>
            
            <div class="gallery-slider">
                <div class="gallery-track" id="gallery-track">
                    {% for item in gallery_items %}
                        {% set img_path = item.image_path or item.event_image or 'images/dummy.jpeg' %}
                        {% if img_path.startswith('http') %}
                            {% set image_url = img_path %}
                        {% elif img_path.startswith('uploads/') %}
                            {% set image_url = url_for('serve_upload', filename=img_path.replace('uploads/', '')) %}
                        {% else %}
                            {% set image_url = url_for('static', filename=img_path) %}
                        {% endif %}
                        <div class="gallery-slide" data-image="{{ image_url }}" data-title="{{ item.title or 'NoBall Sports Club' }}">
                            <img src="{{ image_url }}" alt="{{ item.title or 'NoBall Sports Club' }}" class="gallery-image">
                            <div class="slide-overlay">
                                <h3>{{ item.title or 'NoBall Sports Club' }}</h3>
                                <p>{{ item.description or 'Premium facilities ready for your next match' }}</p>
                            </div>
                        </div>
                    {% endfor %}
                </div>
                
                <button class="gallery-nav prev" id="gallery-prev">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="gallery-nav next" id="gallery-next">
                    <i class="fas fa-chevron-right"></i>
                </button>
                
                <div class="gallery-dots" id="gallery-dots"></div>
            </div>
        </div>
    </section>

    <!-- Corporate Events -->
    <section id="corporate" class="corporate-modern">
        <div class="container-modern">
            <div class="corporate-header">
                <div>
                    <span class="section-badge">Corporate</span>
                    <h2 class="section-title">Corporate Events at NoBall</h2>
                    <p class="section-description">
                        Celebrate launches, team offsites, and client nights with a private sports takeover.
                    </p>
                </div>
                <div class="corporate-cta">
                    <button type="button" class="btn-modern primary" id="corporate-book-btn">
                        <span class="btn-text">Book your corporate event</span>
                        <i class="fas fa-briefcase"></i>
                    </button>
                </div>
            </div>

            <div class="corporate-slider">
                <div class="corporate-grid" id="corporate-track">
                    {% if corporate_events %}
                        {% for event in corporate_events %}
                        {% set hero_path = event.event_image or 'images/openSpace.jpeg' %}
                        {% if hero_path.startswith('http') %}
                            {% set hero_url = hero_path %}
                        {% elif hero_path.startswith('uploads/') %}
                            {% set hero_url = url_for('serve_upload', filename=hero_path.replace('uploads/', '')) %}
                        {% else %}
                            {% set hero_url = url_for('static', filename=hero_path) %}
                        {% endif %}
                        {% set logo_path = event.logo_image %}
                        {% if logo_path %}
                            {% if logo_path.startswith('http') %}
                                {% set logo_url = logo_path %}
                            {% elif logo_path.startswith('uploads/') %}
                                {% set logo_url = url_for('serve_upload', filename=logo_path.replace('uploads/', '')) %}
                            {% else %}
                                {% set logo_url = url_for('static', filename=logo_path) %}
                            {% endif %}
                        {% endif %}
                        <article class="corporate-card">
                            <div class="corporate-media">
                                <img src="{{ hero_url }}" alt="{{ event.title or event.company_name }}" class="corporate-image">
                                {% if logo_path %}
                                    <div class="corporate-logo">
                                        <img src="{{ logo_url }}" alt="{{ event.company_name }} logo">
                                    </div>
                                {% endif %}
                                <div class="corporate-pill">Featured</div>
                            </div>
                            <div class="corporate-body">
                                <div class="corporate-meta">
                                    <span class="company">{{ event.company_name }}</span>
                                    {% if event.event_date %}
                                        {% if event.event_date.__class__.__name__ == 'date' %}
                                            {% set date_label = event.event_date.strftime('%b %d, %Y') %}
                                        {% else %}
                                            {% set date_label = event.event_date %}
                                        {% endif %}
                                        <span class="date">{{ date_label }}</span>
                                    {% endif %}
                                </div>
                                <h3>{{ event.title }}</h3>
                                {% if event.description %}<p>{{ event.description }}</p>{% endif %}
                            </div>
                        </article>
                        {% endfor %}
                    {% else %}
                        <article class="corporate-card placeholder">
                            <div class="corporate-body">
                                <div class="corporate-meta">
                                    <span class="company">Your brand here</span>
                                </div>
                                <h3>Showcase your corporate nights</h3>
                                <p>Upload highlights from your partner events straight from the admin panel.</p>
                            </div>
                        </article>
                    {% endif %}
                </div>

                <button class="corporate-nav prev" id="corporate-prev" aria-label="Previous corporate event">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="corporate-nav next" id="corporate-next" aria-label="Next corporate event">
                    <i class="fas fa-chevron-right"></i>
                </button>

                <div class="corporate-dots" id="corporate-dots"></div>
            </div>
        </div>
    </section>

    <!-- Floating WhatsApp Button -->
    <a href="https://wa.me/{{ whatsapp_number }}" target="_blank" class="floating-whatsapp" aria-label="Chat on WhatsApp">
        <i class="fab fa-whatsapp"></i>
    </a>

    <style>
        .floating-whatsapp {
            position: fixed;
            right: 18px;
            bottom: 18px;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: #25D366;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 24px rgba(0,0,0,0.2);
            z-index: 9999;
            text-decoration: none;
            transition: transform .2s ease, box-shadow .2s ease;
        }
        .floating-whatsapp:hover { transform: translateY(-2px); box-shadow: 0 12px 30px rgba(0,0,0,0.25); }
        .floating-whatsapp i { font-size: 28px; }
        @media (max-width: 480px) {
            .floating-whatsapp { right: 14px; bottom: 14px; width: 52px; height: 52px; }
        }
    </style>

    <!-- Image Modal -->
    <div class="image-modal" id="image-modal">
        <div class="modal-backdrop" onclick="closeImageModal()"></div>
        <div class="modal-content">
            <button class="modal-close" onclick="closeImageModal()">
                <i class="fas fa-times"></i>
            </button>
            <img id="modal-image" src="" alt="">
            <div class="modal-info">
                <h3 id="modal-title"></h3>
            </div>
        </div>
    </div>

    <!-- Corporate Inquiry Modal -->
    <div class="form-modal" id="corporate-modal" aria-hidden="true">
        <div class="modal-backdrop" id="corporate-modal-backdrop"></div>
        <div class="modal-content form-content" role="dialog" aria-modal="true" aria-labelledby="corporate-modal-title">
            <button class="modal-close" id="corporate-modal-close" type="button" aria-label="Close">
                <i class="fas fa-times"></i>
            </button>
            <div class="modal-info">
                <h3 id="corporate-modal-title">Corporate Event Request</h3>
                <p class="modal-subtitle">Share your details and we’ll get back with availability and options.</p>
            </div>
            <form id="corporate-inquiry-form" class="modal-form">
                <div class="form-grid">
                    <label class="form-field">
                        <span>Company Name *</span>
                        <input name="company_name" type="text" required placeholder="Company / Team name">
                    </label>
                    <label class="form-field">
                        <span>Contact Person</span>
                        <input name="contact_name" type="text" placeholder="Your name">
                    </label>
                    <label class="form-field">
                        <span>Phone *</span>
                        <input name="contact_phone" type="tel" required placeholder="+92...">
                    </label>
                    <label class="form-field">
                        <span>Email</span>
                        <input name="contact_email" type="email" placeholder="name@company.com">
                    </label>
                    <label class="form-field">
                        <span>Preferred Date</span>
                        <input name="preferred_date" type="date">
                    </label>
                    <label class="form-field">
                        <span>Attendees (approx.)</span>
                        <input name="attendees" type="number" min="1" max="2000" placeholder="e.g. 20">
                    </label>
                    <label class="form-field form-field-wide">
                        <span>Details</span>
                        <textarea name="message" rows="4" placeholder="What are you planning? (sports, timing, format, etc.)"></textarea>
                    </label>
                </div>
                <div class="modal-actions">
                    <button class="btn-modern secondary" type="button" id="corporate-cancel-btn">Cancel</button>
                    <button class="btn-modern primary" type="submit" id="corporate-submit-btn">
                        <span class="btn-text">Send Request</span>
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
                <div class="modal-status" id="corporate-form-status" role="status" aria-live="polite"></div>
            </form>
        </div>
    </div>

    <!-- Experience Section -->
    <section id="experience" class="experience-modern">
        <div class="container-modern">
            <div class="experience-content">
                <div class="experience-text">
                    <span class="section-badge dark">Why Choose NoBall</span>
                    <h2 class="section-title white">Elevate Your Game Experience</h2>
                    <p class="section-description white">
                        More than just courts - we provide a complete sports ecosystem designed for champions.
                    </p>
                    
                    <div class="features-list">
                        <div class="feature-item">
                            <div class="feature-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="feature-content">
                                <h4>24/7 Availability</h4>
                                <p>Book your preferred time slots anytime, anywhere</p>
                            </div>
                        </div>
                        
                        <div class="feature-item">
                            <div class="feature-icon">
                                <i class="fas fa-medal"></i>
                            </div>
                            <div class="feature-content">
                                <h4>Premium Quality</h4>
                                <p>Professional-grade equipment and surfaces</p>
                            </div>
                        </div>
                        
                        <div class="feature-item">
                            <div class="feature-icon">
                                <i class="fas fa-mobile-alt"></i>
                            </div>
                            <div class="feature-content">
                                <h4>Easy Booking</h4>
                                <p>Simple online booking system with instant confirmation</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="experience-visual">
                    <div class="visual-elements">
                        <div class="element element-1">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <div class="element element-2">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="element element-3">
                            <i class="fas fa-crown"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="experience-modern">
        <div class="container-modern">
            <div class="section-header">
                <span class="section-badge">About Us</span>
                <h2 class="section-title white">The NoBall Experience</h2>
                <p class="section-description white">Where passion meets precision in every game</p>
            </div>
            
            <div class="experience-content">
                <div class="features-list">
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <div class="feature-content">
                            <h4>Premium Facilities</h4>
                            <p>State-of-the-art courts with professional-grade surfaces and equipment for the ultimate sports experience.</p>
                        </div>
                    </div>
                    
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="feature-content">
                            <h4>Flexible Hours</h4>
                            <p>Open from 2 PM to 6 AM daily, accommodating all schedules with convenient booking options.</p>
                        </div>
                    </div>
                    
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="feature-content">
                            <h4>Community Focus</h4>
                            <p>Building a vibrant sports community where players of all levels can connect and improve together.</p>
                        </div>
                    </div>
                    
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="feature-content">
                            <h4>Quality Service</h4>
                            <p>Dedicated staff ensuring every visit exceeds expectations with top-notch service and support.</p>
                        </div>
                    </div>
                </div>
                
                <div class="experience-visual">
                    <div class="visual-elements">
                        <div class="element element-1">
                            <i class="fas fa-medal"></i>
                        </div>
                        <div class="element element-2">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="element element-3">
                            <i class="fas fa-bolt"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Location Section -->
    <section id="location" class="sports-modern">
        <div class="container-modern">
            <div class="section-header">
                <span class="section-badge">Find Us</span>
                <h2 class="section-title">Our Location</h2>
                <p class="section-description">Conveniently located in the heart of the city</p>
            </div>
            
            <div class="location-content" style="display: grid; grid-template-columns: 1fr 1fr; gap: 4rem; align-items: center; margin-top: 3rem;">
                <div class="location-info">
                    <div class="info-card" style="background: white; padding: 2rem; border-radius: 1rem; margin-bottom: 1.5rem; display: flex; gap: 1rem; align-items: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                        <div class="info-icon" style="width: 50px; height: 50px; background: var(--accent-gradient); border-radius: 0.75rem; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.25rem;">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div class="info-content">
                            <h4 style="color: var(--gray-900); margin-bottom: 0.5rem;">Address</h4>
                            <p style="color: var(--gray-600); margin: 0;">The Noball Sports Club<br>G-12 Main Service Road, Kashmir Highway<br>Islamabad, Pakistan</p>
                        </div>
                    </div>
                    
                    <div class="info-card" style="background: white; padding: 2rem; border-radius: 1rem; margin-bottom: 1.5rem; display: flex; gap: 1rem; align-items: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                        <div class="info-icon" style="width: 50px; height: 50px; background: var(--accent-gradient); border-radius: 0.75rem; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.25rem;">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="info-content">
                            <h4 style="color: var(--gray-900); margin-bottom: 0.5rem;">Operating Hours</h4>
                            <p style="color: var(--gray-600); margin: 0;">Monday - Sunday<br>2:00 PM - 6:00 AM<br>Daily Operations</p>
                        </div>
                    </div>
                    
                    <div class="info-card" style="background: white; padding: 2rem; border-radius: 1rem; margin-bottom: 1.5rem; display: flex; gap: 1rem; align-items: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                        <div class="info-icon" style="width: 50px; height: 50px; background: var(--accent-gradient); border-radius: 0.75rem; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.25rem;">
                            <i class="fas fa-parking"></i>
                        </div>
                        <div class="info-content">
                            <h4 style="color: var(--gray-900); margin-bottom: 0.5rem;">Parking</h4>
                            <p style="color: var(--gray-600); margin: 0;">Free parking available<br>Secure & covered<br>24/7 access</p>
                        </div>
                    </div>
                </div>
                
                <div class="map-container">
                    <div class="map-placeholder" style="background: white; padding: 3rem; border-radius: 1.5rem; text-align: center; height: 400px; display: flex; flex-direction: column; justify-content: center; align-items: center; box-shadow: 0 10px 25px rgba(0,0,0,0.1);">
                        <i class="fas fa-map" style="font-size: 3rem; color: var(--accent-gradient); margin-bottom: 1rem;"></i>
                        <h4 style="color: var(--gray-900); margin-bottom: 0.5rem;">Interactive Map</h4>
                        <p style="color: var(--gray-600); margin-bottom: 2rem;">GPS coordinates and directions available</p>
                        <a href="https://share.google/YuWCEWVAqzenSBcsX" target="_blank" class="btn-modern primary">
                            <span class="btn-text">Get Directions</span>
                            <i class="fas fa-external-link-alt"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="contact-modern">
        <div class="container-modern">
            <div class="contact-content">
                <div class="contact-info">
                    <span class="section-badge">Get In Touch</span>
                    <h2 class="section-title">Ready to Play?</h2>
                    <p class="section-description">
                        Contact us for bookings, inquiries, or just to learn more about our facilities.
                    </p>
                    
                    <div class="contact-methods">
                        <div class="contact-method">
                            <div class="method-icon">
                                <i class="fas fa-phone"></i>
                            </div>
                            <div class="method-content">
                                <span class="method-label">Call Us</span>
                                <span class="method-value"><a href="tel:+923293180180" style="color:inherit;text-decoration:none;">+92 329 3180180</a></span>
                            </div>
                        </div>
                        
                        <div class="contact-method">
                            <div class="method-icon">
                                <i class="fab fa-whatsapp"></i>
                            </div>
                            <div class="method-content">
                                <span class="method-label">WhatsApp</span>
                                <span class="method-value"><a href="https://wa.me/{{ whatsapp_number }}" target="_blank" style="color:inherit;text-decoration:none;">+92 329 3180180</a></span>
                            </div>
                        </div>
                        
                        <div class="contact-method">
                            <div class="method-icon">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <div class="method-content">
                                <span class="method-label">Email</span>
                                <span class="method-value"><a href="mailto:noball@courtsideventures.com" style="color:inherit;text-decoration:none;">noball@courtsideventures.com</a></span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="contact-cta">
                    <div class="cta-card">
                        <h3>Start Your Journey</h3>
                        <p>Book your first session and experience the difference</p>
                        <a href="{{ url_for('booking') }}" class="btn-modern primary large">
                            <span class="btn-text">Book Now</span>
                            <i class="fas fa-calendar-plus"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Modern Footer -->
    <footer class="footer-modern">
        <div class="container-modern">
            <div class="footer-content">
                <div class="footer-brand">
                    <div class="brand-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <span class="brand-name">NoBall Sports Club</span>
                    <p class="brand-tagline">Islamabad's all-in-one Sports Club</p>
                </div>
                
                <div class="footer-links">
                    <div class="link-group">
                        <h4>Sports</h4>
                        <a href="#padel">Padel</a>
                        <a href="#cricket">Cricket</a>
                        <a href="#futsal">Futsal</a>
                        <a href="#pickleball">Pickleball</a>
                        <a href="#contact">Axe Throw</a>
                        <a href="#contact">Archery</a>
                        <a href="#contact">Rage Room</a>
                    </div>
                    
                    <div class="link-group">
                        <h4>Services</h4>
                        <a href="{{ url_for('booking') }}">Book Courts</a>
                        <a href="#equipment">Equipment Rental</a>
                        <a href="#coaching">Coaching</a>
                        <a href="#events">Events</a>
                    </div>
                    
                    <div class="link-group">
                        <h4>Contact</h4>
                        <a href="tel:+923293180180">+92 329 3180180</a>
                        <a href="mailto:noball@courtsideventures.com">noball@courtsideventures.com</a>
                        <a href="#location">Location</a>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2024 NoBall Sports Club. All rights reserved.</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="static/js/modern_scripts.js"></script>
    <script>
        // Modern animations and interactions

        // Gallery functionality
        let currentSlide = 0;
        const slides = document.querySelectorAll('.gallery-slide');
        const totalSlides = slides.length;

        function initGallery() {
            if (!totalSlides) return;
            // Create dots
            const dotsContainer = document.getElementById('gallery-dots');
            for (let i = 0; i < totalSlides; i++) {
                const dot = document.createElement('div');
                dot.className = `gallery-dot ${i === 0 ? 'active' : ''}`;
                dot.addEventListener('click', () => goToSlide(i));
                dotsContainer.appendChild(dot);
            }

            // Add click event to slides for modal
            slides.forEach(slide => {
                slide.addEventListener('click', () => {
                    const imageSrc = slide.dataset.image;
                    const title = slide.dataset.title;
                    openImageModal(imageSrc, title);
                });
            });

            // Navigation buttons
            document.getElementById('gallery-prev').addEventListener('click', prevSlide);
            document.getElementById('gallery-next').addEventListener('click', nextSlide);
        }

        function updateGallery() {
            if (!totalSlides) return;
            const track = document.getElementById('gallery-track');
            track.style.transform = `translateX(-${currentSlide * 100}%)`;
            
            // Update dots
            document.querySelectorAll('.gallery-dot').forEach((dot, index) => {
                dot.classList.toggle('active', index === currentSlide);
            });
        }

        function goToSlide(slideIndex) {
            currentSlide = slideIndex;
            updateGallery();
        }

        function nextSlide() {
            if (totalSlides) {
                currentSlide = (currentSlide + 1) % totalSlides;
                updateGallery();
            }
        }

        function prevSlide() {
            if (totalSlides) {
                currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
                updateGallery();
            }
        }

        // Corporate carousel (horizontal scroll)
        let corporateIndex = 0;

        function initCorporateCarousel() {
            const track = document.getElementById('corporate-track');
            const prevBtn = document.getElementById('corporate-prev');
            const nextBtn = document.getElementById('corporate-next');
            const dotsContainer = document.getElementById('corporate-dots');
            if (!track || !prevBtn || !nextBtn || !dotsContainer) return;

            const cards = Array.from(track.querySelectorAll('.corporate-card'));
            if (!cards.length) return;

            const positions = () => cards.map((el) => el.offsetLeft);

            function updateCorporateDots() {
                const dots = dotsContainer.querySelectorAll('.corporate-dot');
                dots.forEach((dot, idx) => dot.classList.toggle('active', idx === corporateIndex));
            }

            function scrollToIndex(idx) {
                const pos = positions();
                corporateIndex = Math.max(0, Math.min(idx, cards.length - 1));
                track.scrollTo({ left: pos[corporateIndex], behavior: 'smooth' });
                updateCorporateDots();
            }

            function syncIndexFromScroll() {
                const left = track.scrollLeft;
                const pos = positions();
                let idx = 0;
                for (let i = 0; i < pos.length; i++) {
                    if (pos[i] <= left + 12) idx = i;
                }
                if (idx !== corporateIndex) {
                    corporateIndex = idx;
                    updateCorporateDots();
                }
            }

            // Build dots
            dotsContainer.innerHTML = '';
            cards.forEach((_, idx) => {
                const dot = document.createElement('div');
                dot.className = `corporate-dot ${idx === 0 ? 'active' : ''}`;
                dot.addEventListener('click', () => scrollToIndex(idx));
                dotsContainer.appendChild(dot);
            });

            prevBtn.addEventListener('click', () => scrollToIndex(corporateIndex - 1));
            nextBtn.addEventListener('click', () => scrollToIndex(corporateIndex + 1));
            track.addEventListener('scroll', () => window.requestAnimationFrame(syncIndexFromScroll), { passive: true });

            // Start at first card
            scrollToIndex(0);
        }

        function openImageModal(imageSrc, title) {
            const modal = document.getElementById('image-modal');
            const modalImage = document.getElementById('modal-image');
            const modalTitle = document.getElementById('modal-title');
            
            modalImage.src = imageSrc;
            modalTitle.textContent = title;
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeImageModal() {
            const modal = document.getElementById('image-modal');
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        function openCorporateModal() {
            const modal = document.getElementById('corporate-modal');
            if (!modal) return;
            modal.classList.add('active');
            modal.setAttribute('aria-hidden', 'false');
            document.body.style.overflow = 'hidden';
        }

        function closeCorporateModal() {
            const modal = document.getElementById('corporate-modal');
            const status = document.getElementById('corporate-form-status');
            if (!modal) return;
            modal.classList.remove('active');
            modal.setAttribute('aria-hidden', 'true');
            document.body.style.overflow = 'auto';
            if (status) status.textContent = '';
        }

        async function submitCorporateInquiry(payload) {
            const res = await fetch('/api/corporate-inquiry', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload),
            });
            const data = await res.json().catch(() => ({}));
            if (!res.ok || !data.success) {
                throw new Error(data.message || `Failed (${res.status})`);
            }
            return data;
        }

        // Auto-slide gallery moved inside DOMContentLoaded for safety
        
        // Mobile menu toggle function (backup)
        function toggleMobileMenu() {
            const mobileToggle = document.getElementById('mobile-toggle');
            const navLinks = document.querySelector('.nav-links');
            const bgAnimation = document.querySelector('.bg-animation');
            
            if (mobileToggle && navLinks) {
                console.log('Toggle mobile menu called');
                mobileToggle.classList.toggle('active');
                navLinks.classList.toggle('active');
                document.body.style.overflow = navLinks.classList.contains('active') ? 'hidden' : 'auto';
                
                // Hide background shapes when menu is active
                if (bgAnimation) {
                    bgAnimation.style.display = navLinks.classList.contains('active') ? 'none' : 'block';
                }
            }
        }

        // Initialize all functionality when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize gallery
            initGallery();
            initCorporateCarousel();
            if (totalSlides > 1) {
                setInterval(nextSlide, 5000);
            }

            // Corporate inquiry modal wiring
            const bookBtn = document.getElementById('corporate-book-btn');
            const modalBackdrop = document.getElementById('corporate-modal-backdrop');
            const modalClose = document.getElementById('corporate-modal-close');
            const cancelBtn = document.getElementById('corporate-cancel-btn');
            const form = document.getElementById('corporate-inquiry-form');
            const status = document.getElementById('corporate-form-status');
            const submitBtn = document.getElementById('corporate-submit-btn');

            bookBtn?.addEventListener('click', (e) => {
                e.preventDefault();
                openCorporateModal();
            });
            modalBackdrop?.addEventListener('click', closeCorporateModal);
            modalClose?.addEventListener('click', closeCorporateModal);
            cancelBtn?.addEventListener('click', closeCorporateModal);
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') closeCorporateModal();
            });

            form?.addEventListener('submit', async (e) => {
                e.preventDefault();
                if (!status || !submitBtn) return;

                const formData = new FormData(form);
                const payload = Object.fromEntries(formData.entries());
                if (payload.attendees) payload.attendees = Number(payload.attendees);

                status.textContent = 'Sending...';
                submitBtn.disabled = true;
                try {
                    await submitCorporateInquiry(payload);
                    status.textContent = 'Request sent. Our team will reach out shortly.';
                    form.reset();
                    setTimeout(closeCorporateModal, 1200);
                } catch (err) {
                    console.error(err);
                    status.textContent = err.message || 'Unable to send request';
                } finally {
                    submitBtn.disabled = false;
                }
            });
            
            // Mobile menu toggle
            const mobileToggle = document.getElementById('mobile-toggle');
            const navLinks = document.querySelector('.nav-links');
            
            if (mobileToggle && navLinks) {
                const bgAnimation = document.querySelector('.bg-animation');
                
                mobileToggle.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Mobile toggle clicked'); // Debug log
                    mobileToggle.classList.toggle('active');
                    navLinks.classList.toggle('active');
                    document.body.style.overflow = navLinks.classList.contains('active') ? 'hidden' : 'auto';
                    
                    // Hide background shapes when menu is active
                    if (bgAnimation) {
                        bgAnimation.style.display = navLinks.classList.contains('active') ? 'none' : 'block';
                    }
                });
                
                // Close menu when clicking on nav links
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', function() {
                        mobileToggle.classList.remove('active');
                        navLinks.classList.remove('active');
                        document.body.style.overflow = 'auto';
                        
                        // Show background shapes when menu is closed
                        if (bgAnimation) {
                            bgAnimation.style.display = 'block';
                        }
                    });
                });
            } else {
                console.error('Mobile toggle or nav links not found');
            }
        });
    </script>
</body>
</html>
